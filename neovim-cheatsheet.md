# Neovim コマンドチートシート

> リーダーキー: `<Space>`

## 目次
- [基本的なVimコマンド](#基本的なvimコマンド)
- [カスタムキーバインド（両モード共通）](#カスタムキーバインド両モード共通)
- [スタンドアロンNeovim専用](#スタンドアロンneovim専用)
- [プラグインコマンド](#プラグインコマンド)
- [コマンドラインモード](#コマンドラインモード)

---

## 基本的なVimコマンド

### モード
- `i` - 挿入モード（カーソルの前）
- `a` - 挿入モード（カーソルの後）
- `o` - 下に新しい行を挿入
- `O` - 上に新しい行を挿入
- `v` - ビジュアルモード
- `V` - ビジュアルラインモード
- `Ctrl-v` - ビジュアルブロックモード
- `ESC` または `jk` - ノーマルモードに戻る

### ナビゲーション
- `h/j/k/l` - 左/下/上/右
- `w/b` - 次/前の単語
- `e` - 単語の終わり
- `0` - 行の先頭
- `^` - 最初の非空白文字
- `$` - 行の終わり
- `gg` - ファイルの先頭
- `G` - ファイルの末尾
- `{数字}G` - 指定行番号へ移動
- `%` - 対応する括弧へジャンプ
- `*/#` - カーソル下の単語を前方/後方検索

### 編集
- `x` - 文字を削除
- `dd` - 行を削除
- `yy` - 行をヤンク（コピー）
- `p/P` - カーソルの後/前に貼り付け
- `u` - 元に戻す
- `Ctrl-r` - やり直し
- `.` - 最後のコマンドを繰り返す
- `ciw` - 単語内を変更
- `ci"` - 引用符内を変更
- `di(` - 括弧内を削除
- `>>/<<` - インデント/インデント解除

### 検索と置換
- `/pattern` - 前方検索
- `?pattern` - 後方検索
- `n/N` - 次/前の一致
- `:%s/old/new/g` - ファイル全体で置換
- `:s/old/new/g` - 現在行で置換

---

## カスタムキーバインド（両モード共通）

### 基本操作
- `<leader>w` - ファイルを保存
- `<leader>q` - スマート終了（ウィンドウを閉じる/全て終了）
- `<leader>x` - 現在のバッファを閉じる
- `<leader>nh` - 検索ハイライトをクリア

### ヘルプシステム
- `<leader>hh` - ヘルプを開く / ヘルプタグ検索（Telescope）
- `<leader>hm` - ヘルプインデックス（全コマンド）/ マニュアルページ（Telescope）
- `<leader>hk` - ヘルプキーコード / キーマップ表示（Telescope）
- `<leader>ht` - Vimのヒント
- `<leader>ho` - Vimオプション
- `<leader>ha` - オートコマンドイベント
- `<leader>hf` - Vim関数
- `<leader>hc` - コマンド一覧（Telescope）
- `<leader>hs` - ヘルプタグ検索（Telescope）

### コメント（Comment.nvim）
- `gcc` - 行コメントの切り替え
- `gc` - コメントの切り替え（ビジュアルモード）
- `gcA` - 行末にコメント追加
- `gco` - 下の行にコメント追加
- `gcO` - 上の行にコメント追加

---

## スタンドアロンNeovim専用

### ウィンドウ管理
- `<leader>sv` - ウィンドウを垂直分割
- `<leader>sh` - ウィンドウを水平分割
- `<leader>se` - 分割を均等サイズに
- `<leader>sx` - 現在の分割を閉じる
- `<C-h/j/k/l>` - ウィンドウ間を移動

### ウィンドウリサイズ
- `<leader>rh` - ウィンドウ幅を減らす
- `<leader>rl` - ウィンドウ幅を増やす
- `<leader>rk` - ウィンドウ高さを増やす
- `<leader>rj` - ウィンドウ高さを減らす
- `<leader>r+` - 幅を10増やす
- `<leader>r-` - 幅を10減らす
- `<leader>r=` - 全ウィンドウを均等サイズに
- `<leader>rm` - 現在のウィンドウを最大化
- `<leader>rr` - ウィンドウサイズを均等に戻す

### タブ管理
- `<leader>to` - 新しいタブを開く
- `<leader>tx` - 現在のタブを閉じる
- `<leader>tn` - 次のタブへ
- `<leader>tp` - 前のタブへ

### ターミナル
- `<leader>tt` - 新しいバッファでターミナルを開く
- `<leader>tl` - 右側にターミナルを開く
- `<leader>th` - 左側にターミナルを開く
- `<leader>tj` - 下にターミナルを開く
- `<leader>tk` - 上にターミナルを開く
- `<leader>tv` - 右側にターミナル（垂直）
- `<leader>ts` - 下にターミナル（水平）
- `<leader>t` - フローティングターミナルの切り替え（ToggleTerm）
- `<Esc>` - ターミナルモードを終了

### ファイルエクスプローラー（nvim-tree）
- `<leader>e` - ファイルエクスプローラーの切り替え

### Telescope（ファジーファインダー）
- `<leader>ff` - ファイル検索
- `<leader>fr` - 最近使用したファイル
- `<leader>fb` - バッファ検索
- `<leader>fg` - プロジェクト内テキスト検索（ライブgrep）
- `<leader>fw` - カーソル下の単語を検索

### Git（Telescope）
- `<leader>gc` - Gitコミット一覧
- `<leader>gs` - Gitステータス

### LSP機能
LSPがアタッチされている時：
- `gD` - 宣言へ移動
- `gd` - 定義へ移動
- `K` - ホバー情報を表示
- `gi` - 実装へ移動
- `<C-k>` - シグネチャヘルプを表示
- `gr` - 参照を表示
- `<leader>D` - 型定義
- `<leader>rn` - シンボルの名前変更
- `<leader>ca` - コードアクション
- `<leader>f` - ドキュメントをフォーマット
- `[d` - 前の診断へ
- `]d` - 次の診断へ
- `<leader>q` - 診断をロケーションリストに設定

### LSPワークスペース
- `<leader>wa` - ワークスペースフォルダを追加
- `<leader>wr` - ワークスペースフォルダを削除
- `<leader>wl` - ワークスペースフォルダ一覧

### LSP Telescope連携
- `<leader>ls` - ドキュメントシンボル
- `<leader>lr` - 参照
- `<leader>ld` - ドキュメント診断
- `<leader>lD` - ワークスペース診断

### バッファ管理（Bufferline）
- `<Tab>` - 次のバッファ
- `<S-Tab>` - 前のバッファ
- タブをマウスクリックで切り替え

### セッション管理（Persistence）
- セッションは自動的に保存・復元される
- `:SessionSave` - 手動でセッション保存
- `:SessionLoad` - 手動でセッション読み込み

---

## プラグインコマンド

### Lazy.nvim（プラグインマネージャー）
- `:Lazy` - プラグインマネージャーUIを開く
- `:Lazy sync` - プラグインの更新とインストール
- `:Lazy clean` - 未使用プラグインの削除
- `:Lazy log` - プラグイン更新ログを表示
- `:Lazy profile` - プラグインの読み込み時間を計測

### Mason（LSP/フォーマッター/リンターマネージャー）
- `:Mason` - Mason UIを開く
- `:MasonInstall <package>` - パッケージをインストール
- `:MasonUninstall <package>` - パッケージをアンインストール
- `:MasonUpdate` - 全パッケージを更新

### nvim-tree（ファイルエクスプローラー）
nvim-treeバッファ内で：
- `<CR>` または `o` - ファイル/フォルダを開く
- `a` - ファイル/フォルダを作成
- `d` - 削除
- `r` - 名前変更
- `x` - カット
- `c` - コピー
- `p` - ペースト
- `R` - 更新
- `H` - 隠しファイルの表示切り替え
- `g?` - ヘルプを表示

### ToggleTerm
- `<C-\>` - ターミナルモードでターミナルを切り替え
- `:ToggleTerm` - ターミナルを切り替え
- `:ToggleTerm direction=float` - フローティングターミナル
- `:ToggleTerm direction=horizontal` - 水平ターミナル
- `:ToggleTerm direction=vertical` - 垂直ターミナル

### Telescope
Telescope内で：
- `<C-j>/<C-k>` - 選択を下/上に移動
- `<CR>` - 選択を開く
- `<C-x>` - 水平分割で開く
- `<C-v>` - 垂直分割で開く
- `<C-t>` - 新しいタブで開く
- `<C-q>` - クイックフィックスリストに送る
- `<Esc>` - Telescopeを閉じる

---

## コマンドラインモード

### よく使うExコマンド
- `:w` - ファイルを書き込み（保存）
- `:q` - 終了
- `:wq` または `:x` - 保存して終了
- `:q!` - 保存せずに終了
- `:e {file}` - ファイルを編集
- `:bn/:bp` - 次/前のバッファ
- `:bd` - バッファを削除
- `:sp {file}` - 水平分割
- `:vsp {file}` - 垂直分割
- `:set {option}` - オプションを設定
- `:source %` - 現在のファイルを再読み込み
- `:checkhealth` - Neovimの健全性チェック

### 便利なVim設定
- `:set number` - 行番号を表示
- `:set relativenumber` - 相対行番号を表示
- `:set wrap/nowrap` - 行の折り返しを切り替え
- `:set hlsearch/nohlsearch` - 検索ハイライトを切り替え
- `:set ignorecase` - 大文字小文字を区別しない検索
- `:set smartcase` - スマートケース検索

---

## ヒント

1. **VSCodeモード**: VSCodeで実行時、ほとんどのUIプラグインは無効化されます。基本的な編集機能と一部のTelescopeヘルプ機能は利用可能です。

2. **Which Key**: キーバインドを忘れた場合、リーダーキーを押して待つと、which-keyが利用可能なオプションを表示します。

3. **ヘルプナビゲーション**: ヘルプファイル内で`Ctrl-]`でリンクをたどり、`Ctrl-o`で戻ります。

4. **クイック保存と終了**: `<leader>w`で保存、`<leader>q`で賢く終了。

5. **マルチカーソル**: ビジュアルブロックモード（`Ctrl-v`）でマルチカーソル編集。

6. **コマンドの繰り返し**: `.`コマンドで最後の変更を繰り返し、一括編集を効率化。

7. **マクロ**: `q{文字}`で記録、`q`で停止、`@{文字}`で再生。
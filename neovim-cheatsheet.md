# Neovim コマンドチートシート

> リーダーキー: `<Space>`

## 目次
- [基本的なVimコマンド](#基本的なvimコマンド)
- [カスタムキーバインド（両モード共通）](#カスタムキーバインド両モード共通)
- [スタンドアロンNeovim専用](#スタンドアロンneovim専用)
- [プラグインコマンド](#プラグインコマンド)
- [コマンドラインモード](#コマンドラインモード)

---

## 基本的なVimコマンド

### モード
- `i` - 挿入モード（カーソルの前）
- `a` - 挿入モード（カーソルの後）
- `o` - 下に新しい行を挿入
- `O` - 上に新しい行を挿入
- `v` - ビジュアルモード
- `V` - ビジュアルラインモード
- `Ctrl-v` - ビジュアルブロックモード
- `ESC` または `jk` - ノーマルモードに戻る

### ナビゲーション
- `h/j/k/l` - 左/下/上/右
- `w/b` - 次/前の単語
- `e` - 単語の終わり
- `0` - 行の先頭
- `^` - 最初の非空白文字
- `$` - 行の終わり
- `gg` - ファイルの先頭
- `G` - ファイルの末尾
- `{数字}G` - 指定行番号へ移動
- `%` - 対応する括弧へジャンプ
- `*/#` - カーソル下の単語を前方/後方検索

### 編集
- `x` - 文字を削除
- `dd` - 行を削除
- `yy` - 行をヤンク（コピー）
- `p/P` - カーソルの後/前に貼り付け
- `u` - 元に戻す
- `Ctrl-r` - やり直し
- `.` - 最後のコマンドを繰り返す
- `ciw` - 単語内を変更
- `ci"` - 引用符内を変更
- `di(` - 括弧内を削除
- `>>/<<` - インデント/インデント解除

### 検索と置換
- `/pattern` - 前方検索
- `?pattern` - 後方検索
- `n/N` - 次/前の一致
- `:%s/old/new/g` - ファイル全体で置換
- `:s/old/new/g` - 現在行で置換

---

## カスタムキーバインド（両モード共通）

### 基本操作
- `<leader>w` - ファイルを保存
- `<leader>q` - スマート終了（ウィンドウを閉じる/全て終了）
- `<leader>x` - 現在のバッファを閉じる（スマートクローズ）
- `<leader>nh` - 検索ハイライトをクリア
- `<Esc>` - 検索ハイライトをクリア

### 2025年版 便利な操作
- `jk` - 挿入モードを終了
- `<leader>s` - カーソル下の単語を置換
- `J` - 選択範囲を下に移動（ビジュアルモード）
- `K` - 選択範囲を上に移動（ビジュアルモード）
- `<C-d>` - 下にスクロールして中央に表示
- `<C-u>` - 上にスクロールして中央に表示
- `n` - 次の検索結果（中央に表示）
- `N` - 前の検索結果（中央に表示）

### ヘルプシステム
- `<leader>hh` - ヘルプを開く / ヘルプタグ検索（Telescope）
- `<leader>hm` - ヘルプインデックス（全コマンド）/ マニュアルページ（Telescope）
- `<leader>hk` - ヘルプキーコード / キーマップ表示（Telescope）
- `<leader>ht` - Vimのヒント
- `<leader>ho` - Vimオプション
- `<leader>ha` - オートコマンドイベント
- `<leader>hf` - Vim関数
- `<leader>hc` - コマンド一覧（Telescope）
- `<leader>hs` - ヘルプタグ検索（Telescope）

### コメント（Comment.nvim）
- `gcc` - 行コメントの切り替え
- `gc` - コメントの切り替え（ビジュアルモード）
- `gcA` - 行末にコメント追加
- `gco` - 下の行にコメント追加
- `gcO` - 上の行にコメント追加

---

## 日本語入力（SKKeleton）
- `<C-l>` - 日本語入力ON/OFF（挿入モード）
- `<leader>j` - 日本語入力をトグルして挿入モードへ

### 入力方法
- **ひらがな**: ローマ字をそのまま入力（例: `arigatou` → ありがとう）
- **カタカナ**: `q` + ローマ字（例: `q` + `nihongo` → ニホンゴ）
- **漢字変換**: 大文字で開始（例: `Nihongo` + Space → 日本語）
- **送り仮名付き**: 大文字+小文字（例: `KaKu` → 書く）

### SKK操作キー
- `Space` - 次の変換候補
- `x` - 前の変換候補
- `Enter` - 確定
- `Ctrl+g` - 変換キャンセル
- `l` - 英数モード
- `L` - 全角英数
- `q` - カタカナ変換
- `Ctrl+q` - カタカナモード切替
- `/` - 英数入力（sticky）

---

## スタンドアロンNeovim専用

### ウィンドウ管理
- `<leader>sv` - ウィンドウを垂直分割
- `<leader>sh` - ウィンドウを水平分割
- `<leader>se` - 分割を均等サイズに
- `<leader>sx` - 現在の分割を閉じる
- `<C-h/j/k/l>` - ウィンドウ間を移動

### ウィンドウリサイズ
- `<leader>rh` - ウィンドウ幅を減らす
- `<leader>rl` - ウィンドウ幅を増やす
- `<leader>rk` - ウィンドウ高さを増やす
- `<leader>rj` - ウィンドウ高さを減らす
- `<leader>r+` - 幅を10増やす
- `<leader>r-` - 幅を10減らす
- `<leader>r=` - 全ウィンドウを均等サイズに
- `<leader>rm` - 現在のウィンドウを最大化
- `<leader>rr` - ウィンドウサイズを均等に戻す

### タブ管理
- `<leader>to` - 新しいタブを開く
- `<leader>tx` - 現在のタブを閉じる
- `<leader>tn` - 次のタブへ
- `<leader>tp` - 前のタブへ

### ターミナル（ToggleTerm）
- `<leader>tt` - ターミナルを切り替え
- `<leader>tf` - フローティングターミナル
- `<leader>th` - 水平ターミナル
- `<leader>tv` - 垂直ターミナル
- `<leader>ts` - 下にターミナル（固定サイズ）
- `<leader>tT` - 新しいタブでターミナル
- `<C-\>` - ターミナルを切り替え（グローバル）
- `<Esc><Esc>` または `<C-]><C-]>` - ターミナルモードを終了（ダブルプレス）

### REPL（ToggleTerm）
- `<leader>tg` - Lazygitを切り替え
- `<leader>tn` - Node REPLを切り替え
- `<leader>tp` - Python REPLを切り替え

### ファイルエクスプローラー（nvim-tree）
- `<leader>e` - ファイルエクスプローラーの切り替え
- `<C-n>` - ファイルエクスプローラーの切り替え（代替）
- `<C-t>` - ファイルツリーにフォーカス
- `<C-f>` - 現在のファイルをツリーで検索

### Telescope（ファジーファインダー）
- `<leader>ff` - ファイル検索（Git対応）
- `<leader>fa` - 全ファイル検索（隠しファイル含む）
- `<leader>fo` - 最近使用したファイル
- `<leader>fb` - バッファ検索
- `<leader>fh` - ヘルプタグ検索
- `<leader>fg` - プロジェクト内テキスト検索（ライブgrep）
- `<leader>fw` - カーソル下の単語を検索
- `<leader>fc` - カラースキーム選択（プレビュー付き）
- `<leader>ft` - プロジェクト内のTODO検索

### Git（Telescope & Lazygit）
- `<leader>gc` - Gitコミット一覧
- `<leader>gs` - Gitステータス
- `<leader>gg` - Lazygitを開く（フローティング）
- `<leader>gG` - Lazygitを新しいタブで開く
- `<leader>tg` - Lazygitの切り替え（ToggleTerm）

### LSP機能
LSPがアタッチされている時：
- `gD` - 宣言へ移動
- `gd` - 定義へ移動
- `K` - ホバー情報を表示
- `<leader>k` - ホバー情報を表示（代替）
- `gi` - 実装へ移動
- `go` - 型定義へ移動
- `<C-k>` - シグネチャヘルプを表示
- `gr` - 参照を表示
- `gra` - コードアクション（代替）
- `<leader>ca` - コードアクション
- `<leader>cr` - シンボルの名前変更
- `<leader>rn` - シンボルの名前変更（代替）
- `<leader>f` - ドキュメントをフォーマット
- `<leader>lf` - ドキュメントをフォーマット（代替）
- `[d` - 前の診断へ
- `]d` - 次の診断へ
- `<leader>d` - 行の診断を表示
- `<leader>lq` - 診断をクイックフィックスに設定

### LSPワークスペース
- `<leader>wa` - ワークスペースフォルダを追加
- `<leader>wr` - ワークスペースフォルダを削除
- `<leader>wl` - ワークスペースフォルダ一覧

### LSP Telescope連携
- `<leader>ls` - ドキュメントシンボル
- `<leader>lr` - 参照
- `<leader>ld` - ドキュメント診断
- `<leader>lD` - ワークスペース診断

### バッファ管理
- `<Tab>` - 次のバッファ
- `<S-Tab>` - 前のバッファ
- `]b` - 次のバッファ
- `[b` - 前のバッファ
- `<leader>bb` - 前のバッファへ
- `<leader>bn` - 次のバッファへ
- `<leader>bl` - バッファ一覧表示

### Bufferline操作
- `<S-h>` - 前のバッファ（Bufferline）
- `<S-l>` - 次のバッファ（Bufferline）
- `<leader>bp` - バッファを選択
- `<leader>bc` - 閉じるバッファを選択
- `<leader>bP` - バッファをピン留め
- `<leader>br` - 右側のバッファを閉じる
- `<leader>bL` - 左側のバッファを閉じる

### セッション管理（Persistence）
- `<leader>qs` - 現在のディレクトリのセッションを復元
- `<leader>ql` - 最後のセッションを復元
- `<leader>qd` - セッション永続化を停止

---

## プラグインコマンド

### Lazy.nvim（プラグインマネージャー）
- `:Lazy` - プラグインマネージャーUIを開く
- `:Lazy sync` - プラグインの更新とインストール
- `:Lazy clean` - 未使用プラグインの削除
- `:Lazy log` - プラグイン更新ログを表示
- `:Lazy profile` - プラグインの読み込み時間を計測

### Mason（LSP/フォーマッター/リンターマネージャー）
- `:Mason` - Mason UIを開く
- `:MasonInstall <package>` - パッケージをインストール
- `:MasonUninstall <package>` - パッケージをアンインストール
- `:MasonUpdate` - 全パッケージを更新

### nvim-tree（ファイルエクスプローラー）
nvim-treeバッファ内で：
- `<CR>` または `o` - ファイル/フォルダを開く
- `a` - ファイル/フォルダを作成
- `d` - 削除
- `r` - 名前変更
- `x` - カット
- `c` - コピー
- `p` - ペースト
- `R` - 更新
- `H` - 隠しファイルの表示切り替え
- `g?` - ヘルプを表示

### ToggleTerm
- `<C-\>` - ターミナルモードでターミナルを切り替え
- `:ToggleTerm` - ターミナルを切り替え
- `:ToggleTerm direction=float` - フローティングターミナル
- `:ToggleTerm direction=horizontal` - 水平ターミナル
- `:ToggleTerm direction=vertical` - 垂直ターミナル

### Telescope
Telescope内で：
- `<C-j>/<C-k>` - 選択を下/上に移動
- `<CR>` - 選択を開く
- `<C-x>` - 水平分割で開く
- `<C-v>` - 垂直分割で開く
- `<C-t>` - 新しいタブで開く
- `<C-q>` - クイックフィックスリストに送る
- `<Esc>` - Telescopeを閉じる

---

## コマンドラインモード

### よく使うExコマンド
- `:w` - ファイルを書き込み（保存）
- `:q` - 終了
- `:wq` または `:x` - 保存して終了
- `:q!` - 保存せずに終了
- `:e {file}` - ファイルを編集
- `:bn/:bp` - 次/前のバッファ
- `:bd` - バッファを削除
- `:sp {file}` - 水平分割
- `:vsp {file}` - 垂直分割
- `:set {option}` - オプションを設定
- `:source %` - 現在のファイルを再読み込み
- `:checkhealth` - Neovimの健全性チェック

### 便利なVim設定
- `:set number` - 行番号を表示
- `:set relativenumber` - 相対行番号を表示
- `:set wrap/nowrap` - 行の折り返しを切り替え
- `:set hlsearch/nohlsearch` - 検索ハイライトを切り替え
- `:set ignorecase` - 大文字小文字を区別しない検索
- `:set smartcase` - スマートケース検索

---

### Claude Code統合
- `<leader>ac` - Claude Codeを切り替え
- `<leader>af` - Claude Codeにフォーカス/切り替え
- `<leader>as` - 選択範囲をClaudeに送信（ビジュアルモード）
- `<leader>aa` - Claudeの変更を受け入れる
- `<leader>ad` - Claudeの変更を拒否

### Gitsigns（Git統合）
- `]h` または `]c` - 次のHunk（変更箇所）へ
- `[h` または `[c` - 前のHunk（変更箇所）へ
- `<leader>hs` - Hunkをステージ
- `<leader>hr` - Hunkをリセット
- `<leader>hS` - バッファ全体をステージ
- `<leader>hu` - ステージを取り消し
- `<leader>hR` - バッファ全体をリセット
- `<leader>hp` - Hunkをプレビュー
- `<leader>hb` - 行のBlame表示
- `<leader>hd` - Diff表示
- `<leader>hD` - Diff表示（HEAD~との比較）
- `<leader>tb` - Blame行の切り替え
- `<leader>td` - 削除行の表示切り替え
- `<leader>uG` - Gitサインの切り替え

### TODOコメントナビゲーション
- `]t` - 次のTODOコメントへ
- `[t` - 前のTODOコメントへ

### 通知システム
- `<leader>nd` - すべての通知を消去

## ヒント

1. **VSCodeモード**: VSCodeで実行時、ほとんどのUIプラグインは無効化されます。基本的な編集機能と一部のTelescopeヘルプ機能は利用可能です。

2. **Which Key**: キーバインドを忘れた場合、リーダーキーを押して待つと、which-keyが利用可能なオプションを表示します。

3. **ヘルプナビゲーション**: ヘルプファイル内で`Ctrl-]`でリンクをたどり、`Ctrl-o`で戻ります。

4. **クイック保存と終了**: `<leader>w`で保存、`<leader>q`で賢く終了。

5. **マルチカーソル**: ビジュアルブロックモード（`Ctrl-v`）でマルチカーソル編集。

6. **コマンドの繰り返し**: `.`コマンドで最後の変更を繰り返し、一括編集を効率化。

7. **マクロ**: `q{文字}`で記録、`q`で停止、`@{文字}`で再生。